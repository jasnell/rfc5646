/*! rfc5646 2014-03-27 Author: James M Snell (jasnell@gmail.com), License: Public Domain */
var module=module||void 0,define=define||void 0;!function(a,b){var c=a.document?b(a):b();"object"==typeof module&&"object"==typeof module.exports&&(module.exports=c),"function"==typeof define&&define.amd&&define("rfc5646",[],function(){return c})}("undefined"!=typeof window?window:this,function(a){function b(a,b,c){if(void 0===a||null===a)return a;if(f&&a.forEach===f)a.forEach(b,c);else for(var d in a){var e=b.call(c,a[d],d,a);if(e===!1)break}}function c(a,b,c){if(void 0===a||null===a)return a;if(g&&a.find===g)return a.find(b,c);for(var d in a)if(b.call(c,a[d],d,a))return a[d]}function d(a,b,c){if(h){var d={configurable:!1,enumerable:!1};c?d.get=b:d.value=b,Object.defineProperty(this,a,d)}else this[a]=b}function e(a,b){var d,e=function(b){return b.r.test(a)},f=function(){for(var a=1,c=b;c&&c.type==i.ExtLang;)a++,c=c.previous;return a},g=function(a,b){return b&&(!s(a,i.Singleton)&&s(b.type,i.Extension)?a|=i.Extension:!s(a,i.Singleton)&&s(b.type,i.PrivateUse)&&(a|=i.PrivateUse)),a};if(0===a.length)return i.Invalid;if(!b)return d=c([j,k,m],e),d?d.v:i.Invalid;switch(b.type){case i.Language:case i.ExtLang:return d=c([j,k,l,n,o,p,q,r],e),d?d.v==i.ExtLang?f()<=3?d.v:i.Invalid:g(d.v,b):i.Invalid;case i.Script:return d=c([j,k,l,p,q,r],e),d?g(d.v,b):i.Invalid;case i.Region:return d=c([j,k,l,q,r],e),d?g(d.v,b):i.Invalid;default:return d=c([j,k,l,r],e),d?g(d.v,b):i.Invalid}}var f=Array.prototype.forEach,g=Array.prototype.find,h=Object.defineProperty,i={Wildcard:void 0,Other:0,Language:1,ExtLang:2,Script:4,Region:8,Variant:16,Singleton:32,Extension:64,PrivateUse:128,Invalid:255},j={r:/^\*$/i,v:i.Wildcard},k={r:/^x$/i,v:i.PrivateUse|i.Singleton},l={r:/^[a-wy-z]$]/i,v:i.Extension|i.Singleton},m={r:/^[a-z]{2,3}$/i,v:i.Language},n={r:/^[a-z]{3}$/i,v:i.ExtLang},o={r:/^[a-z]{4}$/i,v:i.Script},p={r:/^[a-z]{2}|[0-9]{3}$/i,v:i.Region},q={r:/^[a-z0-9]{5,8}|[0-9][a-z0-9]{3}$/i,v:i.Variant},r={r:/^[a-z0-9]{2,8}$/i,v:i.Other},s=function(a,b){return(a&b)==b},t=function(a,b){d.call(this,"token",a.toLowerCase()),b&&(d.call(b,"next",this),d.call(this,"previous",b)),d.call(this,"type",e(a,b)),d.call(this,"isWildcard",void 0===this.type),d.call(this,"isSingleton",s(this.type,i.Singleton)),d.call(this,"isExtension",s(this.type,i.Extension)),d.call(this,"isPrivateUse",s(this.type,i.PrivateUse)),d.call(this,"toString",function(){switch(this.type){case i.Script:return this.token[0].toUpperCase()+this.token.substr(1);case i.Region:return this.token.toUpperCase();default:return this.token}}),d.call(this,"valueOf",this.toString)},u=function(a){if(!(this instanceof u))return new u(a.toString());if(h instanceof u)return h;var c,e,f,g=a.split(/[-_]/),h=this,j=!1;b(g,function(a){switch(e=new t(a,e),e.type){case i.Language:d.call(h,"language",e.toString());break;case i.Region:d.call(h,"region",e.toString());break;case i.Script:d.call(h,"script",e.toString());break;case i.Variant:d.call(h,"variant",e.toString());break;case i.Invalid:d.call(h,"invalid",!0);break;default:e.isSingleton?e.isPrivateUse?d.call(h,"privateuse",e):e.isExtension&&(f||(f={}),f[e.token]=e):e.isWildcard&&(this.wild=!0)}c=c||e}),f&&d.call(this,"extensions",f),d.call(this,"isWildcard",j),d.call(this,"length",g.length),d.call(this,"first",c),d.call(this,"toString",function(){for(var a=[],b=this.first;b;)a.push(b.toString()),b=b.next;return a.join("-")}),d.call(this,"valueOf",this.toString),d.call(this,"matches",function(a){var b=j?this:a,c=j?a:this,d=b.toString().replace(/-\*/g,"(?:-[a-z0-9]{1,8})*"),e=new RegExp("^"+d+"$","i");return e.test(c.toString())}),j||d.call(this,"suitableFor",function(a){return a=u(a),this.language!==a.language?!1:this.region&&this.region!==a.region?!1:this.script&&this.script!==a.script?!1:this.variant&&this.variant!==a.variant?!1:!0}),d.call(this,"truncate",function(a){var b=[],c=this.first;if(c.isPrivateUse)return this;for(;c;){var d=c;if(c=c.next,d.type<16){if(a&&(a.extlang===!1&&d.type===i.ExtLang||a.script===!1&&d.type===i.Script||a.variant===!1&&d.type===i.Variant))continue;b.push(d.toString())}}return new u(b.join("-"))}),d.call(this,"minimal",function(){return this.truncate({extlang:!1,script:!1,variant:!1})}),d.call(this,"iterator",function(){var a=this.first,b={next:function(){if(this.done)return{done:!0};var b=a;return a=a.next,{done:!1,value:b}}};return d.call(b,"done",function(){return void 0===a},!0),b},!0),d.call(this,"forEach",function(a){for(var b=this.iterator;!b.done;)a(b.next().value)}),Object.freeze(this)};return u.Types=i,Object.freeze(u.Types),Object.freeze(u),void 0!==a&&(a.LanguageTag=u),u});